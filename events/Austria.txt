##################
#Austrian events
#################

add_namespace = austria

country_event = {
	id = austria.1
	title = austria.1.t
	desc = austria.1.desc
	picture = GFX_report_event_election_vote
	
	is_triggered_only = yes

	fire_only_once = yes

	trigger = {
		tag = AUS
	}
	option = {
		name = austria.1.a
		ai_chance = {
			factor = 20
		}
		complete_national_focus = AUS_Archduke_Robert_of_Austria_Este
	}
	option = {
		name = austria.1.b
		ai_chance = {
			factor = 50
		}
		complete_national_focus = AUS_GER_greater_austria
	}
	option = {
		name = austria.1.c
		ai_chance = {
			factor = 30
		}
		complete_national_focus = AUS_elect_the_KPO
	}
}

# Slovenian question
country_event = {
	id = austria.2
	title = austria.2.t
	desc = austria.2.desc
	picture = GFX_report_event_hitler_parade



	option = { # Accept
		name = austria.2.a
		ai_chance = {
			base = 30
			modifier = {
				add = -25
				AUS = { has_army_size = { size < 10 } }
			}
			modifier = {
				add = 100
				AUS = { has_army_size = { size > 30 } }
			}
			modifier = {
				add = 50
				is_in_faction_with = AUS
			}
		}
		AUS = {
			country_event = { hours = 2 id = austria.4 }
		}
		custom_effect_tooltip = GAME_OVER_TT
	}
	option = { # Refuse
		name = austria.2.b
		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
			modifier = {
				AUS = { has_army_size = { size > 15 } }
				factor = 0.5
			}
			modifier = {
				add = 20
				GER = { has_army_size = { size < 15 } }
			}
			modifier = {
				add = 100
				HUN = {
					OR = {
						has_completed_focus = HUN_protect_austria
						is_in_faction_with = AUS
					}
				}
			}
			modifier = {
				add = 100
				ITA = {
					OR = {
						has_completed_focus = ITA_guarantee_austrian_independence
						is_in_faction_with = AUS
					}
				}
			}
			modifier = {
				factor = 2
				is_in_faction = yes
				NOT = { is_in_faction_with = AUS }
			}
			modifier = {
				any_other_country = {
					has_guaranteed = SLV
				}
				factor = 5 #i've got friends
			}
			modifier = {
				any_other_country = {
					is_major = yes
					has_guaranteed = SLV
				}
				factor = 5 #i've got big friends
			}
		}
		AUS = {
			add_opinion_modifier = { target = ROOT modifier = GER_anschluss_rejected }
			country_event = { hours = 2 id = austria.3 }
			if = { limit = { is_in_faction_with = SLV }
				remove_from_faction = SLV
			}
		}
	}
}

# Slovenia refuses Anschluss
country_event = {
	id = austria.3
	title = austria.3.t
	desc = austria.3.desc
	picture = GFX_report_event_german_troops



	option = {
		name = austria.3.a
		create_wargoal = {
			type = take_state_focus
			target = SLV
			generator = { 102 736 853}
		}
	}
}

country_event = {
	id = austria.4
	title = austria.4.t
	desc = austria.4.desc
	picture = GFX_report_event_german_speech

	is_triggered_only = yes

 	immediate = {
 		add_named_threat = { threat = 5 name = austria.4.t }
 	}

	option = {
		name = austria.4.a
		102 = {
			add_core_of = AUS
		}
		736 = {
				add_core_of = AUS
		}
		853 = {
				add_core_of = AUS
		}
		AUS = {
			every_unit_leader = {
				set_nationality = AUS
			}
		}
		annex_country = { target = SLV transfer_troops = yes }
		add_political_power = 75
		set_country_flag = AUS_annexed
		add_war_support = 0.1
		add_stability = 0.05


	}
}